<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <style>
    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      background-color: aqua;

    }

    #hero {
      height: 1080px;
      overflow: hidden;
      position: relative;
      z-index: 0;
    }

    .layer {
      background-position: top center;
      background-repeat: no-repeat;
      background-size: cover;
      width: 100%;
      height: 1080px;
      position: fixed;
      /* position: fixed;
    z-index: 0;
    */
    }

    .layer1 {
      background-image: url(./kuvat/background11920.png);
    }

    .layer2 {
      background-image: url(./kuvat/foreground21920.png);
    }

    .layer3 {
      background-image: url(./kuvat/foreground1920.png);
    }

    main {
      padding: 50px;
      z-index: 1;
      position: relative;
      background-color: #3a3933;
      color: white;
      font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
      font-size: 1.2rem;
      align-items: center;

    }

    main h1 {
      font-size: 3rem;

    }

    main p {
      width: 70%;
    }

    .wrapper {
      background: black url(./kuvat/ISS-40.jpg) no-repeat center center;
      background-size: cover;
      background-attachment: fixed;
      height: calc(100vh - 88px);
      position: relative;
      overflow: hidden;
    }

    .mousemovelayer-1 {
      background-image: url(./kuvat/astronaut.png);
      background-size: cover;
      position: absolute;
      width: 30vmin;
      aspect-ratio: 1.07;
      top: 30%;
      left: 50%;
      z-index: 1;
    }

    .mousemovelayer-2 {
      background-image: url(./kuvat/shuttle.png);
      background-size: cover;
      position: absolute;
      width: 30vmin;
      aspect-ratio: 1.008;
      top: 10%;
      left: 30%;
      z-index: 0;
    }

    #mouse,
    #mouse-center {
      color: aliceblue;
      border: 1px solid white;
      width: 150px;
      height: 60px;
      background-color: rgba(0, 0, 0, 0.5);
      position: absolute;
      z-index: 1;
      right: 20px;
    }

    #mouse {
      top: 50px;
      font-size: 1rem;
    }

    #mouse-center {
      font-size: 1rem;
      top: 150px;
    }
  </style>
</head>

<body>
  <!-- z-index alempi eli 0-->
  <div class="keyart" id="hero">
    <div class="layer layer1" data-type="parallax" data-speed="3"></div>
    <div class="layer layer2" data-type="parallax" data-speed="7"></div>
    <div class="layer layer3" data-type="parallax" data-speed="20"></div>


  </div>

  <!-- z-index ylempi eli 1-->

  <main>
    <h1>Upea huikea parallax effektini</h1>
    <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Commodi asperiores obcaecati atque provident sint
      suscipit iste doloremque enim nemo illum. Nam consequuntur facilis ea iste culpa nihil eius iusto voluptate?
      Incidunt eos facilis odio, ex ut error suscipit corrupti temporibus qui saepe ullam magni repellat excepturi
      recusandae et quos amet iure aperiam? Dolorum eum fugiat at ea voluptatibus! Quas, aut!
      Saepe id autem consectetur quia eum nam explicabo dignissimos porro nihil possimus aut, soluta numquam quasi
      praesentium alias modi. Laborum debitis ea tempore perferendis et aspernatur illo placeat numquam facere.
      Facilis, atque. Vel, accusamus est vero doloremque, repudiandae, impedit nulla quas tempore deleniti sunt hic
      reiciendis rem sit! Necessitatibus eius dicta explicabo et molestiae, quo quas est distinctio accusantium
      incidunt!
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum libero aliquid debitis sint doloribus tenetur natus
      obcaecati impedit nostrum? Laborum fugiat esse molestiae fugit, voluptate deleniti alias deserunt sequi adipisci.
      Fuga quisquam laudantium nisi consectetur sapiente excepturi? Tempora quibusdam reiciendis, aliquid vitae
      cupiditate eveniet asperiores! Enim, inventore distinctio, dolore illum amet unde odit consectetur nemo alias
      ullam molestiae, iusto quod!
      Voluptates perspiciatis ipsa repellat consequuntur architecto aliquam, mollitia distinctio accusantium, odit rerum
      ducimus neque sequi optio iusto. Laudantium soluta nulla reprehenderit, deserunt quibusdam autem, animi
      voluptatibus adipisci ut sed quam?
      Aperiam nobis maxime error soluta reprehenderit architecto repellat, delectus fugit. Facere saepe, qui animi
      accusamus temporibus sed sit. Dicta suscipit, aliquid quisquam quo sit nisi aperiam rem tenetur esse voluptatem?
      Error, corrupti, repudiandae ipsa minus pariatur sunt molestias cupiditate vero voluptas hic numquam suscipit quae
      ratione. Repellat pariatur aliquam repudiandae nam accusantium. Suscipit doloremque eaque inventore, mollitia
      distinctio temporibus neque.
      Voluptatum laudantium debitis inventore ipsum cupiditate odit impedit maiores aut assumenda, excepturi officiis? A
      quos nostrum quo id maiores ab temporibus expedita nobis, possimus magnam ipsa libero laboriosam fuga iste!</p>


    <h2> Mousemove parallax </h2>

    <div class="wrapper">
      <div class="mousemovelayer-1" data-speed="30" data-type="mousemoveparallax"></div>
      <div class="mousemovelayer-2" data-speed="10" data-type="mousemoveparallax"></div>
      <div id="mouse"></div>
      <div id="mouse-center"></div>
    </div>
  </main>

  <script>
    window.addEventListener("scroll", (evt) => {

      const top = this.pageYOffset;

      const layers = document.querySelectorAll("[data-type='parallax']");
      let layer, speed, yPos;
      for (let i = 0; i < layers.length; i++) {
        layer = layers[i];
        speed = layer.getAttribute('data-speed');
        const yPos = -(top * speed / 100);
        layer.setAttribute('style', 'transform: translate3d(0px, ' + yPos + 'px, 0px)');

      }
    });

    const spacecat = document.querySelector('.wrapper');
    const printMouse = document.querySelector('#mouse');
    const printMouseCenter = document.querySelector('#mouse-center');
    const astronautLayer = document.querySelector('.mousemovelayer-1');
    const shuttleLayer = document.querySelector('.mousemovelayer-2');



    spacecat.addEventListener('mousemove', (evt) => {
      let mouseX = evt.clientX;
      let mouseY = evt.clientY;

      console.log('mouseX', mouseX + ' mouseY', mouseY);

      printMouse.innerHTML = `Dokumentin yläkulmasta ${mouseX}px ja ${mouseY}px`;
      
      let centerx = window.innerWidth / 2;
      let centery = window.innerHeight / 2;
      
      
      let from_center_x = centerx - mouseX;
      let from_center_y = centery - mouseY;
      
      printMouseCenter.innerHTML = `Keskipisteestä <br> ${from_center_x}px ja ${from_center_y}px`;

      let layer, speed;
      const layers = document.querySelectorAll("[data-type='mousemoveparallax']");
      for (let i = 0; i < layers.length; i++) {
        layer = layers[i];
        speed = layer.getAttribute('data-speed');

        if (layer === astronautLayer) {
        layer.style.transform =
        'translateX(' + from_center_x * speed / 500 + '%) translateY(' + from_center_y * speed/ 500 + '%)';
        }
        if (layer === shuttleLayer) {
          layer.style.transform =
        'translateX(' + -from_center_x * speed / 500 + '%) translateY(' + -from_center_y * speed/ 500 + '%)';
        }
      }


    });
  </script>
</body>

</html>